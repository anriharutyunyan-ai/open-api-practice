<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoMechanic AI | Professional Diagnostics</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Russo+One&display=swap" rel="stylesheet">
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container py-5">
    <!-- Header Section -->
    <div class="row justify-content-center mb-5">
        <div class="col-lg-10 text-center">
            <h1 class="display-3 mb-2">
                <i class="fa-solid fa-wrench brand-icon"></i>Auto<span style="color: var(--primary-color);">Mechanic</span> AI
            </h1>
            <p class="lead" style="color: var(--text-muted);">Intelligent Vehicle Diagnostics & Repair Assistance</p>
        </div>
    </div>

    <div class="row g-4">
        <!-- Left Column: Input Panel -->
        <div class="col-lg-5">
            <div class="card h-100 border-0">
                <div class="card-header d-flex align-items-center">
                    <i class="fa-solid fa-clipboard-check me-2" style="color: var(--accent-color)"></i>
                    <h5 class="mb-0">New Diagnostic</h5>
                </div>
                <div class="card-body p-4">
                    <form id="chatForm">
                        <div class="mb-4">
                            <label class="form-label text-uppercase fw-bold text-muted small">Vehicle System</label>
                            <select id="category" class="form-select">
                                <option value="car">üöó Car / Truck</option>
                                <option value="bike">üèçÔ∏è Motorcycle / Bike</option>
                                <option value="engine">‚öôÔ∏è Engine / Transmission</option>
                                <option value="maintenance">üîß General Maintenance</option>
                                <option value="electrical">‚ö° Electrical System</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="form-label text-uppercase fw-bold text-muted small">Describe Symptoms</label>
                            <textarea id="message" class="form-control" placeholder="E.g., 2018 Ford Focus vibrates when braking at high speeds..." rows="6" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary w-100" id="submitBtn">
                            <span id="btnText">Run Diagnosis <i class="fa-solid fa-arrow-right ms-2"></i></span>
                            <span id="spinner" class="d-none"><i class="fa-solid fa-gear gear-spinner me-2"></i>Processing...</span>
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Right Column: Results Panel -->
        <div class="col-lg-7">
            <!-- AI Response -->
            <div id="response" class="card d-none fade-in h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0 text-white"><i class="fa-solid fa-microchip me-2"></i>AI Analysis</h5>
                    <span class="badge-custom">Generated by GPT-3.5</span>
                </div>
                <div class="card-body p-4">
                    <div id="responseText"></div>
                </div>
            </div>

            <!-- Default Placeholder -->
            <div id="placeholder" class="card h-100 d-flex justify-content-center align-items-center text-center p-5">
                <div class="opacity-50">
                    <i class="fa-solid fa-car-on mb-3" style="font-size: 4rem; color: #333;"></i>
                    <h4 class="text-muted">Awaiting Input</h4>
                    <p class="small text-muted">Select a category and describe the issue to begin.</p>
                </div>
            </div>

            <!-- Similar Cases (RAG Feature) -->
            <div id="similarCases" class="mt-4 d-none fade-in">
                <h5 class="mb-3" style="color: var(--accent-color); font-size: 0.9rem;">
                    <i class="fa-solid fa-database me-2"></i>MATCHING RECORDS
                </h5>
                <div id="casesList"></div>
            </div>
        </div>
    </div>
    
    <!-- History Section -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fa-solid fa-clock-rotate-left me-2"></i>Recent Sessions</h5>
                </div>
                <div class="card-body">
                    <div id="history" class="list-group list-group-flush">
                        <!-- History items injected via JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Custom JS -->
<script src="/static/app.js"></script>

</body>
</html>